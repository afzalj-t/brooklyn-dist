################################################################################
#
#    Licensed to the Apache Software Foundation (ASF) under one or more
#    contributor license agreements.  See the NOTICE file distributed with
#    this work for additional information regarding copyright ownership.
#    The ASF licenses this file to You under the Apache License, Version 2.0
#    (the "License"); you may not use this file except in compliance with
#    the License.  You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.
#
################################################################################

# Common pattern layout for appenders
log4j2.pattern = %d{ISO8601} | %-5p | %-16t | %-32c{1} | %X{bundle.id} - %X{bundle.name} - %X{bundle.version} | %m%n

# Root logger
log4j2.rootLogger.level = DEBUG
# uncomment to use asynchronous loggers, which require mvn:com.lmax/disruptor/3.3.2 library
#log4j2.rootLogger.type = asyncRoot
#log4j2.rootLogger.includeLocation = false
log4j2.rootLogger.appenderRef.RollingFile.ref=RollingFile
log4j2.rootLogger.appenderRef.PaxOsgi.ref=PaxOsgi
log4j2.rootLogger.appenderRef.Console.ref=Console
log4j2.rootLogger.appenderRef.Console.filter.threshold.type=ThresholdFilter
log4j2.rootLogger.appenderRef.Console.filter.threshold.level=${karaf.log.console:-OFF}

# Appenders configuration

# Console appender not used by default (see log4j2.rootLogger.appenderRefs)
log4j2.appender.console.type=Console
log4j2.appender.console.name=Console
log4j2.appender.console.layout.type=PatternLayout
log4j2.appender.console.layout.pattern=${log4j2.pattern}

# Rolling file appender
log4j2.appender.rolling.type=RollingRandomAccessFile
log4j2.appender.rolling.name=RollingFile
log4j2.appender.rolling.fileName=${karaf.data}/log/brooklyn.log
log4j2.appender.rolling.filePattern=${karaf.data}/log/brooklyn.log.%i
# uncomment to not force a disk flush
#log4j2.appender.rolling.immediateFlush = false
log4j2.appender.rolling.append=true
log4j2.appender.rolling.layout.type=PatternLayout
log4j2.appender.rolling.layout.pattern=${log4j2.pattern}
log4j2.appender.rolling.policies.type=Policies
log4j2.appender.rolling.policies.size.type=SizeBasedTriggeringPolicy
log4j2.appender.rolling.policies.size.size=16MB

# Audit file appender
log4j2.appender.audit.type=RollingRandomAccessFile
log4j2.appender.audit.name=AuditRollingFile
log4j2.appender.audit.fileName=${karaf.data}/security/audit.log
log4j2.appender.audit.filePattern=${karaf.data}/security/audit.log.%i
log4j2.appender.audit.append=true
log4j2.appender.audit.layout.type=PatternLayout
log4j2.appender.audit.layout.pattern=${log4j2.pattern}
log4j2.appender.audit.policies.type=Policies
log4j2.appender.audit.policies.size.type=SizeBasedTriggeringPolicy
log4j2.appender.audit.policies.size.size=8MB

# OSGi appender
log4j2.appender.osgi.type=PaxOsgi
log4j2.appender.osgi.name=PaxOsgi
log4j2.appender.osgi.filter=*

# Loggers configuration

# Brooklyn loggers
log4j2.logger.brooklyn.name=org.apache.brooklyn
log4j2.logger.brooklyn.level=DEBUG
log4j2.logger.brooklyn_ssh.name=org.apache.brooklyn.SSH
log4j2.logger.brooklyn_ssh.level=DEBUG
log4j2.logger.brooklyn_jclouds.name=org.apache.brooklyn.location.basic.jclouds
log4j2.logger.brooklyn_jclouds.level=DEBUG
log4j2.logger.brooklyn_internal_ssh.name=org.apache.brooklyn.util.internal.ssh

# Karaf loggers
log4j2.logger.karaf.name=org.apache.karaf
log4j2.logger.karaf.level=INFO
log4j2.logger.felix.name=org.apache.felix
log4j2.logger.felix.level=INFO
log4j2.logger.pax_web.name=org.ops4j.pax.web
log4j2.logger.pax_web.level=INFO
log4j2.logger.aries.name=org.apache.aries
log4j2.logger.aries.level=INFO

# JClouds loggers
log4j2.logger.jclouds.name=org.apache.jclouds
log4j2.logger.jclouds.level=DEBUG
log4j2.logger.jclouds_compute.name=org.apache.jclouds.compute
log4j2.logger.jclouds_compute.level=DEBUG
log4j2.logger.jclouds_headers.name=org.apache.jclouds.headers
log4j2.logger.jclouds_headers.level=DEBUG
log4j2.logger.jclouds_ssh.name=jclouds.ssh
log4j2.logger.jclouds_ssh.level=INFO
log4j2.logger.jclouds_wire.name=org.apache.jclouds.wire
log4j2.logger.jclouds_wire.level=OFF

# WINRM4J loggers
log4j2.logger.winrm4j.name=io.cloudsoft.winrm4j.winrm
log4j2.logger.winrm4j.level=DEBUG

# Spifly logger
log4j2.logger.spifly.name = org.apache.aries.spifly
log4j2.logger.spifly.level = WARN

# Security audit logger
log4j2.logger.audit.name = org.apache.karaf.jaas.modules.audit
log4j2.logger.audit.level = INFO
log4j2.logger.audit.additivity = false
log4j2.logger.audit.appenderRef.AuditRollingFile.ref = AuditRollingFile

# Misc loggers
log4j2.logger.reflections.name=org.reflections
log4j2.logger.reflections.level=INFO
log4j2.logger.whirr.name=org.apache.whirr.service.ComputeCache
log4j2.logger.whirr.level=INFO
log4j2.logger.http_client.name=org.apache.http.impl.client
log4j2.logger.http_client.level=INFO
log4j2.logger.javax_management.name=javax.management.remote
log4j2.logger.javax_management.level=INFO
log4j2.logger.schmizz.name=net.schmizz
log4j2.logger.schmizz.level=WARN
log4j2.logger.cxf.name=org.apache.cxf
log4j2.logger.cxf.level=ERROR
log4j2.logger.jetty.name=org.eclipse.jetty
log4j2.logger.jetty.level=WARN
log4j2.logger.mongodb.name=org.mongodb.driver
log4j2.logger.mongodb.level=WARN
log4j2.logger.swagger.name=com.wordnik.swagger
log4j2.logger.swagger.level=OFF
